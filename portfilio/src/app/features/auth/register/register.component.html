<div class="register-container">
  <form class="register-form" #registerForm="ngForm" (ngSubmit)="register(registerForm)">
    <h2>Inscription</h2>

    <!-- Erreurs générales (ex: email déjà pris, mots de passe non identiques) -->
    @if (errorMessage) {
      <div class="error-message">{{ errorMessage }}</div>
    }

    <div class="form-group">
      <label for="firstName">Prénom</label>
      <input type="text" id="firstName" name="firstName" [(ngModel)]="userData.firstName" required #firstName="ngModel">
      @if (firstName.invalid && (firstName.dirty || firstName.touched)) {
        <div class="field-error-message">Le prénom est requis.</div>
      }
    </div>

    <div class="form-group">
      <label for="lastName">Nom</label>
      <input type="text" id="lastName" name="lastName" [(ngModel)]="userData.lastName" required #lastName="ngModel">
      @if (lastName.invalid && (lastName.dirty || lastName.touched)) {
        <div class="field-error-message">Le nom est requis.</div>
      }
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" [(ngModel)]="userData.email" required email #email="ngModel">
      @if (email.invalid && (email.dirty || email.touched)) {
        @if (email.errors?.['required']) {
          <div class="field-error-message">L'email est requis.</div>
        }
        @if (email.errors?.['email']) {
          <div class="field-error-message">Le format de l'email est invalide.</div>
        }
      }
    </div>

    <div class="form-group">
      <label for="password">Mot de passe</label>
      <input type="password" id="password" name="password" [(ngModel)]="userData.password" required minlength="6" #password="ngModel">
      @if (password.invalid && (password.dirty || password.touched)) {
        @if (password.errors?.['required']) {
          <div class="field-error-message">Le mot de passe est requis.</div>
        }
        @if (password.errors?.['minlength']) {
          <div class="field-error-message">Le mot de passe doit contenir au moins 6 caractères.</div>
        }
      }
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirmer le mot de passe</label>
      <input type="password" id="confirmPassword" name="confirmPassword" [(ngModel)]="userData.confirmPassword" required #confirmPassword="ngModel">
      @if (confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)) {
        <div class="field-error-message">La confirmation du mot de passe est requise.</div>
      }
    </div>

    <button type="submit" class="submit-button" [disabled]="registerForm.invalid">S'inscrire</button>
    <p class="redirect-link">
      Déjà un compte ? <a routerLink="/auth/login">Se connecter</a>
    </p>
  </form>
</div>
