@import '../../../../styles/variables';

.click-overlay {
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  z-index: 150; cursor: default;
}

.app-header {
  position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
  background-color: rgba($color-bg-hero, 0.9);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid rgba(0,0,0,0.03);

  display: flex;
  justify-content: space-between;
  align-items: center;
  height: $header-height;
  padding: 0 2rem;

  // --- GAUCHE ---
  .header-left {
    flex: 0 0 auto;
    position: relative; z-index: 10;

    .logo-link {
      display: block; width: fit-content; cursor: pointer; line-height: 0;
    }
    .logo-img { height: 40px; display: block; }
  }

  // --- CENTRE (Absolu) ---
  .left-section {
    position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
    display: flex; align-items: center; justify-content: center;
    white-space: nowrap;

    .btn-back {
      background: none; border: none; cursor: pointer;
      display: flex; align-items: center; gap: 0.5rem;
      color: $color-dark; padding: 0;

      svg { width: 24px; height: 24px; transition: transform 0.2s; }
      .back-text { font-family: 'Inter', sans-serif; font-size: 1.2rem; font-weight: 800; }

      &:hover { color: $color-orange; svg { transform: translateX(-3px); } }
    }
  }

  // --- DROITE (Correction ici) ---
  .header-right {
    margin-left: auto;
    display: flex; justify-content: flex-end; align-items: center; gap: 1rem;

    // CORRECTION : z-index doit être supérieur à l'overlay (150)
    position: relative; z-index: 200;

    .icon-btn {
      background: none; border: none; cursor: pointer; padding: 0;
      width: 40px; height: 40px; border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      color: $color-dark; transition: all 0.2s ease;

      svg { width: 22px; height: 22px; pointer-events: none; }

      &:hover, &.active {
        color: $color-orange;
        background-color: rgba($color-orange, 0.1);
      }
    }

    .favorite-btn { color: #C05858; &:hover { color: darken(#C05858, 10%); } }

    .profile-container {
      position: relative;
      .profile-dropdown {
        position: absolute; top: 120%; right: 0; width: 200px;
        background: white; border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15); padding: 0.5rem;
        // Le z-index ici est relatif au parent (.header-right: 200), donc il sera au-dessus
        z-index: 201;
        display: flex; flex-direction: column; gap: 4px;

        &::before {
          content: ''; position: absolute; top: -6px; right: 14px;
          width: 12px; height: 12px; background: white; transform: rotate(45deg);
        }

        .dropdown-item {
          display: flex; align-items: center; gap: 10px; width: 100%; padding: 10px 15px;
          background: none; border: none; text-align: left;
          font-family: 'Inter', sans-serif; font-size: 0.95rem; color: $color-dark;
          border-radius: 8px; cursor: pointer; transition: background 0.2s;

          svg { color: #888; transition: color 0.2s; }
          &:hover { background-color: rgba($color-dark, 0.05); svg { color: $color-orange; } }
        }
        .divider { height: 1px; background-color: #eee; margin: 4px 0; }
        .dropdown-item.logout {
          color: #d63031; &:hover { background-color: rgba(214, 48, 49, 0.08); } svg { color: #d63031; }
        }
      }
    }
  }
}
